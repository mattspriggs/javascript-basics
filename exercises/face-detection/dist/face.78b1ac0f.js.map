{"mappings":"AAAA,0EAA0E;AAC1E,8EAA8E;AAC9E,0DAA0D;AAE1D,MAAM,QAAQ,SAAS,aAAa,CAAC;AAErC,MAAM,SAAS,SAAS,aAAa,CAAC;AACtC,MAAM,MAAM,OAAO,UAAU,CAAC;AAE9B,MAAM,aAAa,SAAS,aAAa,CAAC;AAC1C,MAAM,UAAU,WAAW,UAAU,CAAC;AAEtC,MAAM,eAAe,IAAI,OAAO,YAAY,CAAC;IAAE,UAAU,IAAI;AAAC;AAC9D,MAAM,gBAAgB,SAAS,gBAAgB,CAC7C;AAGF,MAAM,UAAU;IACd,MAAM;IACN,OAAO;AACT;AAEA,SAAS,aAAa,KAAK,EAAE;IAC3B,QAAQ,GAAG,CAAC,MAAM,aAAa,CAAC,KAAK;IACrC,MAAM,EAAE,MAAK,EAAE,KAAI,EAAE,GAAG,MAAM,aAAa;IAC3C,OAAO,CAAC,KAAK,GAAG,WAAW;AAC7B;AACA,cAAc,OAAO,CAAC,CAAC,QAAU,MAAM,gBAAgB,CAAC,SAAS;AACjE,qDAAqD;AACrD,eAAe,gBAAgB;IAC7B,MAAM,SAAS,MAAM,UAAU,YAAY,CAAC,YAAY,CAAC;QACvD,OAAO;YAAE,OAAO;YAAM,QAAQ;QAAI;IACpC;IACA,MAAM,SAAS,GAAG;IAClB,MAAM,MAAM,IAAI;IAChB,oDAAoD;IACpD,QAAQ,GAAG,CAAC,MAAM,UAAU,EAAE,MAAM,WAAW;IAC/C,OAAO,KAAK,GAAG,MAAM,UAAU;IAC/B,OAAO,MAAM,GAAG,MAAM,WAAW;IACjC,WAAW,KAAK,GAAG,MAAM,UAAU;IACnC,WAAW,MAAM,GAAG,MAAM,WAAW;AACvC;AAEA,eAAe,SAAS;IACtB,MAAM,QAAQ,MAAM,aAAa,MAAM,CAAC;IACxC,mFAAmF;IACnF,MAAM,OAAO,CAAC;IACd,MAAM,OAAO,CAAC;IACd,sBAAsB,SAAS,4CAA4C;AAC7E;AAEA,SAAS,SAAS,IAAI,EAAE;IACtB,MAAM,EAAE,MAAK,EAAE,OAAM,EAAE,IAAG,EAAE,KAAI,EAAE,GAAG,KAAK,WAAW;IACrD,IAAI,SAAS,CAAC,GAAG,GAAG,OAAO,KAAK,EAAE,OAAO,MAAM;IAC/C,IAAI,WAAW,GAAG;IAClB,IAAI,SAAS,GAAG;IAChB,IAAI,UAAU,CAAC,MAAM,KAAK,OAAO;AACnC;AAEA,SAAS,OAAO,EAAE,aAAa,KAAI,EAAE,EAAE;IACrC,QAAQ,qBAAqB,GAAG,KAAK;IACrC,QAAQ,SAAS,CAAC,GAAG,GAAG,WAAW,KAAK,EAAE,WAAW,MAAM;IAC3D,qBAAqB;IACrB,QAAQ,SAAS,CACf,oBAAoB;IACpB,OACA,KAAK,CAAC,EACN,KAAK,CAAC,EACN,KAAK,KAAK,EACV,KAAK,MAAM,EACX,kBAAkB;IAClB,KAAK,CAAC,EACN,KAAK,CAAC,EACN,QAAQ,IAAI,EACZ,QAAQ,IAAI;IAEd,6CAA6C;IAC7C,MAAM,QAAQ,KAAK,KAAK,GAAG,QAAQ,KAAK;IACxC,MAAM,SAAS,KAAK,MAAM,GAAG,QAAQ,KAAK;IAC1C,QAAQ,SAAS,CACf,YACA,KAAK,CAAC,EACN,KAAK,CAAC,EACN,QAAQ,IAAI,EACZ,QAAQ,IAAI,EACZ,mBAAmB;IACnB,KAAK,CAAC,GAAG,AAAC,CAAA,QAAQ,KAAK,KAAK,AAAD,IAAK,QAAQ,KAAK,EAC7C,KAAK,CAAC,GAAG,AAAC,CAAA,SAAS,KAAK,MAAM,AAAD,IAAK,QAAQ,KAAK,EAC/C,OACA;AAEJ;AACA,gBAAgB,IAAI,CAAC","sources":["pixelated-face.js"],"sourcesContent":["// The face detection does not work on all browsers and operating systems.\n// If you are getting a `Face detection service unavailable` error or similar,\n// it's possible that it won't work for you at the moment.\n\nconst video = document.querySelector('.webcam');\n\nconst canvas = document.querySelector('.video');\nconst ctx = canvas.getContext('2d');\n\nconst faceCanvas = document.querySelector('.face');\nconst faceCtx = faceCanvas.getContext('2d');\n\nconst faceDetector = new window.FaceDetector({ fastMode: true });\nconst optionsInputs = document.querySelectorAll(\n  '.controls input[type=\"range\"]'\n);\n\nconst options = {\n  SIZE: 10,\n  SCALE: 1.6,\n};\n\nfunction handleOption(event) {\n  console.log(event.currentTarget.value);\n  const { value, name } = event.currentTarget;\n  options[name] = parseFloat(value);\n}\noptionsInputs.forEach((input) => input.addEventListener('input', handleOption));\n//Write a function that will populate the users video\nasync function populateVideo() {\n  const stream = await navigator.mediaDevices.getUserMedia({\n    video: { width: 1280, height: 720 },\n  });\n  video.srcObject = stream;\n  await video.play();\n  //size the canvases to be the same size as the video\n  console.log(video.videoWidth, video.videoHeight);\n  canvas.width = video.videoWidth;\n  canvas.height = video.videoHeight;\n  faceCanvas.width = video.videoWidth;\n  faceCanvas.height = video.videoHeight;\n}\n\nasync function detect() {\n  const faces = await faceDetector.detect(video);\n  //ask the browser when the next animation frame is and tell it to run detect for us\n  faces.forEach(drawFace);\n  faces.forEach(censor);\n  requestAnimationFrame(detect); //recursion function - function calls itself\n}\n\nfunction drawFace(face) {\n  const { width, height, top, left } = face.boundingBox;\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.strokeStyle = '#ffc600';\n  ctx.lineWidth = 2;\n  ctx.strokeRect(left, top, width, height);\n}\n\nfunction censor({ boundingBox: face }) {\n  faceCtx.imageSmoothingEnabled = false;\n  faceCtx.clearRect(0, 0, faceCanvas.width, faceCanvas.height);\n  //Draw the small face\n  faceCtx.drawImage(\n    //5 source arguments\n    video, //where does the source come from?\n    face.x, //Where do we start the source pull from\n    face.y,\n    face.width,\n    face.height,\n    //4 draw arguments\n    face.x, //Where do we start drawing?\n    face.y,\n    options.SIZE,\n    options.SIZE\n  );\n  //Take the small face and draw in large space\n  const width = face.width * options.SCALE;\n  const height = face.height * options.SCALE;\n  faceCtx.drawImage(\n    faceCanvas, //Source\n    face.x, //Where do we start the source pull from\n    face.y,\n    options.SIZE,\n    options.SIZE,\n    //Drawing arguments\n    face.x - (width - face.width) / options.SCALE,\n    face.y - (height - face.height) / options.SCALE,\n    width,\n    height\n  );\n}\npopulateVideo().then(detect);\n"],"names":[],"version":3,"file":"face.78b1ac0f.js.map","sourceRoot":"/__parcel_source_root/"}